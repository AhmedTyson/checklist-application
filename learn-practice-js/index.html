<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Curriculum</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="src/shared/loader/loader.css" />
    <link rel="stylesheet" href="src/app/styles/main.css" />
  </head>
  <body>
    <!-- Global Loader -->
    <div id="global-loader">
      <div class="loader-spinner"></div>
    </div>
    <script src="src/shared/loader/loader.js"></script>

    <div id="app-root">
      <!-- Sidebar: Navigation -->
      <nav class="sidebar">
        <div class="sidebar-header">
          <div class="brand-logo">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="var(--accent)" />
              <path
                d="M2 17L12 22L22 17"
                stroke="var(--accent)"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M2 12L12 17L22 12"
                stroke="var(--text-muted)"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>
          <div class="brand-text">
            <span id="sidebar-course-title" class="brand-title">JS Master</span>
            <span class="brand-subtitle">Curriculum</span>
          </div>
        </div>

        <div class="section-label">PROGRESS</div>
        <div class="progress-container">
          <div class="progress-bar">
            <div id="global-progress-bar" class="progress-fill"></div>
          </div>
          <span id="global-percentage" class="progress-text">0%</span>
        </div>

        <div class="search-container">
          <input
            type="text"
            id="search-input"
            class="search-input"
            placeholder="Search topics..."
            autocomplete="off"
          />
          <span class="search-icon">üîç</span>
        </div>

        <div class="section-label">MODULES</div>
        <div id="stage-nav" class="nav-list">
          <!-- Nav items injected here -->
        </div>

        <div class="sidebar-footer">
          <a
            href="courses.html"
            class="icon-btn sidebar-back-btn"
            title="Back to Courses"
            style="
              text-decoration: none;
              gap: 4px;
              font-size: 11px;
              font-weight: 500;
            "
          >
            <svg
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
            Courses
          </a>
          <div style="flex: 1"></div>
          <button
            class="icon-btn"
            onclick="app.resetData()"
            title="Reset Progress"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
              <path d="M3 3v5h5" />
            </svg>
          </button>
          <a
            href="admin.html"
            class="icon-btn"
            title="Open Admin Panel"
            style="
              text-decoration: none;
              display: flex;
              align-items: center;
              justify-content: center;
            "
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="3"></circle>
              <path
                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
              ></path>
            </svg>
          </a>
        </div>
      </nav>

      <!-- Main View: The List -->
      <main class="main-view">
        <!-- DASHBOARD VIEW -->
        <div id="dashboard-container" class="dashboard-container hidden">
          <!-- Stats Row -->
          <div id="stats-row" class="stats-row">
            <div class="stat-card">
              <div class="stat-icon stat-icon--total">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                  <polyline points="2 17 12 22 22 17"></polyline>
                  <polyline points="2 12 12 17 22 12"></polyline>
                </svg>
              </div>
              <div class="stat-data">
                <span id="stat-total" class="stat-value">0</span>
                <span class="stat-label">Total Items</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon stat-icon--done">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                  <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
              </div>
              <div class="stat-data">
                <span id="stat-completed" class="stat-value">0</span>
                <span class="stat-label">Completed</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon stat-icon--streak">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polygon
                    points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"
                  ></polygon>
                </svg>
              </div>
              <div class="stat-data">
                <span id="stat-streak" class="stat-value">0</span>
                <span class="stat-label">Day Streak</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon stat-icon--remaining">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
              </div>
              <div class="stat-data">
                <span id="stat-remaining" class="stat-value">0</span>
                <span class="stat-label">Remaining</span>
              </div>
            </div>
          </div>

          <!-- Hero Section -->
          <div class="dash-hero">
            <div class="hero-content">
              <span class="badg-hero">Current Focus</span>
              <h2 id="hero-title">Welcome Back</h2>
              <p id="hero-desc">
                Select a module to begin your journey or pick up where you left
                off.
              </p>
              <button class="btn-primary" onclick="app.continueJourney()">
                Continue Journey ‚Üí
              </button>
            </div>
            <div class="hero-stat">
              <span id="hero-percentage">0%</span>
              <label>Mastery</label>
            </div>
          </div>

          <!-- Stage Progress Table -->
          <div class="dash-section-label">STAGE PROGRESS</div>
          <div id="stage-table" class="stage-table">
            <!-- Stage rows injected here -->
          </div>

          <!-- Activity Heatmap -->
          <div class="dash-section-label" style="margin-top: 32px">
            STUDY ACTIVITY
            <span id="heatmap-subtitle" class="heatmap-subtitle"
              >Last 30 days</span
            >
          </div>
          <div id="activity-heatmap" class="activity-heatmap">
            <!-- Dots injected here -->
          </div>
        </div>

        <!-- STAGE VIEW (Header + List) -->
        <div id="stage-view-wrapper">
          <header class="view-header">
            <div style="display: flex; align-items: center; gap: 12px">
              <button
                id="menu-btn"
                class="icon-btn mobile-only"
                style="display: none"
              >
                ‚ò∞
              </button>
              <h1 id="current-stage-name">Select Module</h1>
            </div>
            <div class="stage-progress-container">
              <div class="stage-progress-bar">
                <div id="stage-progress-fill" class="stage-progress-fill"></div>
              </div>
              <span id="stage-percentage" class="stage-progress-text">0%</span>
            </div>
            <div class="header-actions">
              <span class="status-badge">Track</span>
            </div>
          </header>

          <div id="content-area" class="item-list">
            <!-- Checklist items injected here -->
          </div>
        </div>
      </main>

      <!-- Detail View: The Inspector -->
      <aside id="detail-panel" class="detail-panel">
        <div class="detail-empty-state" id="detail-empty">
          <p>Select an item to view details</p>
        </div>

        <div class="detail-content hidden" id="detail-content">
          <header class="detail-header">
            <div class="meta-row">
              <div style="display: flex; align-items: center; gap: 8px">
                <button
                  id="back-btn"
                  class="icon-btn mobile-only"
                  style="display: none"
                >
                  ‚Üê
                </button>
                <span id="detail-id" class="mono-id">ID-01</span>
              </div>
              <div class="actions">
                <label class="toggle-switch">
                  <input type="checkbox" id="mark-complete-toggle" />
                  <span class="slider"></span>
                </label>
                <span class="label-text">Mastered</span>
              </div>
            </div>
            <h2 id="detail-title">Variable Scope</h2>
          </header>

          <div class="scroll-body">
            <div
              id="detail-resources"
              class="info-block"
              style="display: none"
            ></div>

            <section class="info-block">
              <h3>Concept</h3>
              <p id="detail-explanation">Explanation goes here...</p>
            </section>

            <section class="info-block">
              <h3>Implementation</h3>
              <div class="code-block">
                <pre><code id="detail-code">...</code></pre>
              </div>
            </section>

            <section class="info-block prompt-block">
              <h3>Discovery Prompt</h3>
              <p id="detail-prompt">...</p>
            </section>
          </div>
        </div>
      </aside>
    </div>

    <!-- Module Entry Point -->
    <script type="module" src="src/app/core/App.js"></script>
  </body>
</html>
